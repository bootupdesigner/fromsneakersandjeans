{"ast":null,"code":"var __extends=this&&this.__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p];};return _extendStatics(d,b);};return function(d,b){if(typeof b!==\"function\"&&b!==null)throw new TypeError(\"Class extends value \"+String(b)+\" is not a constructor or null\");_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}return t;};return __assign.apply(this,arguments);};var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols===\"function\")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]];}return t;};import React,{Component}from'react';import Animated from\"react-native-web/dist/exports/Animated\";import Easing from\"react-native-web/dist/exports/Easing\";import I18nManager from\"react-native-web/dist/exports/I18nManager\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableWithoutFeedback from\"react-native-web/dist/exports/TouchableWithoutFeedback\";import View from\"react-native-web/dist/exports/View\";import Arrow from\"./Arrow\";import{DEBUG,DEFAULT_ARROW_SIZE,FIX_SHIFT,isWeb,styles}from\"./Constants\";import{computeGeometry,Geometry}from\"./Geometry\";import{Placement,Point,Rect,Size}from\"./Types\";import{getChangedProps,getRectForRef}from\"./Utility\";var BasePopover=function(_super){__extends(BasePopover,_super);function BasePopover(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.state={requestedContentSize:null,activeGeom:undefined,nextGeom:undefined,showing:false,animatedValues:{scale:new Animated.Value(0),translate:new Animated.ValueXY(),fade:new Animated.Value(0),translateArrow:new Animated.ValueXY()}};_this._isMounted=false;_this.animating=false;_this.animateOutAfterShow=false;_this.popoverRef=React.createRef();_this.arrowRef=React.createRef();return _this;}BasePopover.prototype.debug=function(line,obj){if(DEBUG||this.props.debug)console.log(\"[\"+new Date().toISOString()+\"] \"+line+(obj?\": \"+JSON.stringify(obj):''));};BasePopover.prototype.componentDidMount=function(){this._isMounted=true;};BasePopover.prototype.componentDidUpdate=function(prevProps){var importantProps=['isVisible','fromRect','displayArea','verticalOffset','offset','placement'];var changedProps=getChangedProps(this.props,prevProps,importantProps);if(!changedProps.length)return;this.debug('[BasePopover] componentDidUpdate - changedProps',changedProps);if(this.props.isVisible!==prevProps.isVisible){this.debug(\"componentDidUpdate - isVisible changed, now \"+this.props.isVisible);if(!this.props.isVisible){if(this.state.showing)this.animateOut();else this.animateOutAfterShow=true;this.debug('componentDidUpdate - Hiding popover');}}else if(this.props.isVisible&&prevProps.isVisible){this.debug('componentDidUpdate - isVisible not changed, handling other changes');this.handleChange();}};BasePopover.prototype.componentWillUnmount=function(){this._isMounted=false;if(this.state.showing){this.debug('componentWillUnmount');this.animateOut();}};BasePopover.prototype.measureContent=function(requestedContentSize){var _this=this;if(!requestedContentSize.width){console.warn(\"Popover Warning - Can't Show - The Popover content has a width of 0, so there is nothing to present.\");return;}if(!requestedContentSize.height){console.warn(\"Popover Warning - Can't Show - The Popover content has a height of 0, so there is nothing to present.\");return;}if(this.props.skipMeasureContent()){this.debug(\"measureContent - Skipping, waiting for resize to finish\");return;}if(!this.state.requestedContentSize||!requestedContentSize.equals(this.state.requestedContentSize)){this.debug(\"measureContent - new requestedContentSize: \"+JSON.stringify(requestedContentSize)+\" (used to be \"+JSON.stringify(this.state.requestedContentSize)+\")\");this.setState({requestedContentSize:requestedContentSize},function(){return _this.handleChange();});}else{this.debug(\"measureContent - Skipping, content size did not change\");}};BasePopover.prototype.handleChange=function(){var _this=this;if(this.handleChangeTimeout)clearTimeout(this.handleChangeTimeout);if(!this.state.requestedContentSize){this.debug('handleChange - no requestedContentSize, exiting...');return;}this.debug('handleChange - waiting 100ms to accumulate all changes');this.handleChangeTimeout=setTimeout(function(){var _a=_this.state,activeGeom=_a.activeGeom,animatedValues=_a.animatedValues,requestedContentSize=_a.requestedContentSize;var _b=_this.props,arrowSize=_b.arrowSize,popoverStyle=_b.popoverStyle,fromRect=_b.fromRect,displayArea=_b.displayArea,placement=_b.placement,onOpenStart=_b.onOpenStart,arrowShift=_b.arrowShift,onPositionChange=_b.onPositionChange,offset=_b.offset,popoverShift=_b.popoverShift;if(requestedContentSize){_this.debug('handleChange - requestedContentSize',requestedContentSize);_this.debug('handleChange - displayArea',displayArea);_this.debug('handleChange - fromRect',fromRect);if(placement)_this.debug('handleChange - placement',placement.toString());var geom_1=computeGeometry({requestedContentSize:requestedContentSize,placement:placement,fromRect:fromRect,displayArea:displayArea,arrowSize:arrowSize||DEFAULT_ARROW_SIZE,popoverStyle:popoverStyle,arrowShift:arrowShift,debug:_this.debug.bind(_this),previousPlacement:_this.getGeom().placement,offset:offset,popoverShift:popoverShift});_this.setState({nextGeom:geom_1,requestedContentSize:requestedContentSize},function(){if(geom_1.viewLargerThanDisplayArea.width||geom_1.viewLargerThanDisplayArea.height){_this.debug('handleChange - delaying showing popover because viewLargerThanDisplayArea');}else if(!activeGeom){_this.debug('handleChange - animating in');if(onOpenStart)setTimeout(onOpenStart);_this.animateIn();}else if(activeGeom&&!Geometry.equals(activeGeom,geom_1)){var moveTo=new Point(geom_1.popoverOrigin.x,geom_1.popoverOrigin.y);_this.debug('handleChange - Triggering popover move to',moveTo);_this.animateTo({values:animatedValues,fade:1,scale:1,translatePoint:moveTo,easing:Easing.inOut(Easing.quad),geom:geom_1,callback:onPositionChange});}else{_this.debug('handleChange - no change');}});}},100);};BasePopover.getPolarity=function(){return I18nManager.isRTL?-1:1;};BasePopover.prototype.getGeom=function(){var _a=this.state,activeGeom=_a.activeGeom,nextGeom=_a.nextGeom;if(activeGeom)return activeGeom;if(nextGeom)return nextGeom;return new Geometry({popoverOrigin:new Point(0,0),anchorPoint:new Point(0,0),placement:Placement.AUTO,forcedContentSize:new Size(0,0),viewLargerThanDisplayArea:{width:false,height:false}});};BasePopover.prototype.getTranslateOrigin=function(){var requestedContentSize=this.state.requestedContentSize;var arrowSize=this.props.arrowSize||DEFAULT_ARROW_SIZE;var _a=this.getGeom(),forcedContentSize=_a.forcedContentSize,viewLargerThanDisplayArea=_a.viewLargerThanDisplayArea,anchorPoint=_a.anchorPoint,placement=_a.placement;var viewWidth=0;if(viewLargerThanDisplayArea.width&&(forcedContentSize===null||forcedContentSize===void 0?void 0:forcedContentSize.width))viewWidth=forcedContentSize.width;else if(requestedContentSize===null||requestedContentSize===void 0?void 0:requestedContentSize.width)viewWidth=requestedContentSize.width;if([Placement.LEFT,Placement.RIGHT].includes(placement))viewWidth+=arrowSize.height;var viewHeight=0;if(viewLargerThanDisplayArea.height&&(forcedContentSize===null||forcedContentSize===void 0?void 0:forcedContentSize.height))viewHeight=forcedContentSize.height;else if(requestedContentSize===null||requestedContentSize===void 0?void 0:requestedContentSize.height)viewHeight=requestedContentSize.height;if([Placement.TOP,Placement.BOTTOM].includes(placement))viewHeight+=arrowSize.height;this.debug('getTranslateOrigin - popoverSize',{width:viewWidth,height:viewHeight});this.debug('getTranslateOrigin - anchorPoint',anchorPoint);return new Point(anchorPoint.x-viewWidth/2,anchorPoint.y-viewHeight/2);};BasePopover.prototype.animateOut=function(){var _this=this;if(this.props.onCloseStart)setTimeout(this.props.onCloseStart);if(this._isMounted)this.setState({showing:false});this.debug('animateOut - isMounted',this._isMounted);this.animateTo({values:this.state.animatedValues,fade:0,scale:0,translatePoint:this.getTranslateOrigin(),callback:function callback(){return setTimeout(_this.props.onCloseComplete);},easing:Easing.inOut(Easing.quad),geom:this.getGeom()});};BasePopover.prototype.animateIn=function(){var _this=this;var nextGeom=this.state.nextGeom;if(nextGeom!==undefined&&nextGeom instanceof Geometry){var values=this.state.animatedValues;var translateStart=this.getTranslateOrigin();translateStart.y+=FIX_SHIFT;values.translate.setValue(translateStart);var translatePoint=new Point(nextGeom.popoverOrigin.x,nextGeom.popoverOrigin.y);this.debug('animateIn - translateStart',translateStart);this.debug('animateIn - translatePoint',translatePoint);this.animateTo({values:values,fade:1,scale:1,translatePoint:translatePoint,easing:Easing.out(Easing.back(1)),geom:nextGeom,callback:function callback(){if(_this._isMounted){_this.setState({showing:true});if(_this.props.debug||DEBUG){setTimeout(function(){return _this.popoverRef.current&&getRectForRef(_this.popoverRef).then(function(rect){return _this.debug('animateIn - onOpenComplete - Calculated Popover Rect',rect);});});setTimeout(function(){return _this.arrowRef.current&&getRectForRef(_this.arrowRef).then(function(rect){return _this.debug('animateIn - onOpenComplete - Calculated Arrow Rect',rect);});});}}if(_this.props.onOpenComplete)setTimeout(_this.props.onOpenComplete);if(_this.animateOutAfterShow||!_this._isMounted){_this.animateOut();_this.animateOutAfterShow=false;}}});}};BasePopover.prototype.animateTo=function(args){var _this=this;var fade=args.fade,translatePoint=args.translatePoint,scale=args.scale,callback=args.callback,easing=args.easing,values=args.values;var commonConfig=__assign({duration:300,easing:easing,useNativeDriver:!isWeb},this.props.animationConfig);if(this.animating){setTimeout(function(){return _this.animateTo(args);},100);return;}translatePoint.y=translatePoint.y+FIX_SHIFT;if(!fade&&fade!==0){console.log('Popover: Fade value is null');return;}if(!translatePoint){console.log('Popover: Translate Point value is null');return;}if(!scale&&scale!==0){console.log('Popover: Scale value is null');return;}this.animating=true;Animated.parallel([Animated.timing(values.fade,__assign(__assign({},commonConfig),{toValue:fade})),Animated.timing(values.translate,__assign(__assign({},commonConfig),{toValue:translatePoint})),Animated.timing(values.scale,__assign(__assign({},commonConfig),{toValue:scale}))]).start(function(){_this.animating=false;if(_this._isMounted)_this.setState({activeGeom:_this.state.nextGeom});if(callback)callback();});};BasePopover.prototype.render=function(){var _this=this;var _a=this.state,animatedValues=_a.animatedValues,nextGeom=_a.nextGeom,requestedContentSize=_a.requestedContentSize;var flattenedPopoverStyle=StyleSheet.flatten(this.props.popoverStyle);var arrowSize=this.props.arrowSize||DEFAULT_ARROW_SIZE;var geom=this.getGeom();var transformStyle=__assign(__assign({position:'absolute'},requestedContentSize),{transform:[{translateX:animatedValues.translate.x},{translateY:animatedValues.translate.y},{scale:animatedValues.scale}]});var shadowOffset=flattenedPopoverStyle.shadowOffset,shadowColor=flattenedPopoverStyle.shadowColor,shadowOpacity=flattenedPopoverStyle.shadowOpacity,shadowRadius=flattenedPopoverStyle.shadowRadius,elevation=flattenedPopoverStyle.elevation,otherPopoverStyles=__rest(flattenedPopoverStyle,[\"shadowOffset\",\"shadowColor\",\"shadowOpacity\",\"shadowRadius\",\"elevation\"]);var shadowStyle={shadowOffset:shadowOffset,shadowColor:shadowColor,shadowOpacity:shadowOpacity,shadowRadius:shadowRadius};var contentWrapperStyle=__assign(__assign(__assign({},styles.popoverContent),otherPopoverStyles),{elevation:elevation});if(nextGeom){contentWrapperStyle.maxWidth=nextGeom.forcedContentSize.width;contentWrapperStyle.maxHeight=nextGeom.forcedContentSize.height;}var arrowPositionStyle={};if(geom.placement===Placement.RIGHT||geom.placement===Placement.LEFT){arrowPositionStyle.top=geom.anchorPoint.y-geom.popoverOrigin.y-arrowSize.height;if(transformStyle.width)transformStyle.width+=arrowSize.height;if(geom.placement===Placement.RIGHT)contentWrapperStyle.left=arrowSize.height;}else if(geom.placement===Placement.TOP||geom.placement===Placement.BOTTOM){arrowPositionStyle.left=geom.anchorPoint.x-geom.popoverOrigin.x-arrowSize.width/2;if(transformStyle.height)transformStyle.height+=arrowSize.height;if(geom.placement===Placement.BOTTOM)contentWrapperStyle.top=arrowSize.height;}switch(geom.placement){case Placement.TOP:arrowPositionStyle.bottom=0;break;case Placement.BOTTOM:arrowPositionStyle.top=0;break;case Placement.LEFT:arrowPositionStyle.right=0;break;case Placement.RIGHT:arrowPositionStyle.left=0;break;default:}var backgroundShift=animatedValues.fade.interpolate({inputRange:[0,0.0001,1],outputRange:[0,FIX_SHIFT,FIX_SHIFT]});var backgroundStyle=__assign(__assign(__assign({},styles.background),{transform:[{translateY:backgroundShift}]}),StyleSheet.flatten(this.props.backgroundStyle));var containerStyle=__assign(__assign({},styles.container),{opacity:animatedValues.fade});var backgroundColor=flattenedPopoverStyle.backgroundColor||styles.popoverContent.backgroundColor;return React.createElement(View,{pointerEvents:\"box-none\",style:[styles.container,{top:-1*FIX_SHIFT}]},React.createElement(View,{pointerEvents:\"box-none\",style:[styles.container,{top:FIX_SHIFT,flex:1}],onLayout:function onLayout(evt){return _this.props.onDisplayAreaChanged(new Rect(evt.nativeEvent.layout.x,evt.nativeEvent.layout.y-FIX_SHIFT,evt.nativeEvent.layout.width,evt.nativeEvent.layout.height));}}),React.createElement(Animated.View,{pointerEvents:\"box-none\",style:containerStyle},this.props.showBackground!==false&&React.createElement(TouchableWithoutFeedback,{onPress:this.props.onRequestClose},React.createElement(Animated.View,{style:backgroundStyle})),React.createElement(View,{pointerEvents:\"box-none\",style:__assign({top:0,left:0},shadowStyle)},React.createElement(Animated.View,{style:transformStyle},React.createElement(View,{ref:this.popoverRef,style:contentWrapperStyle,onLayout:function onLayout(evt){var layout=__assign({},evt.nativeEvent.layout);setTimeout(function(){return _this._isMounted&&_this.measureContent(new Size(layout.width,layout.height));},10);}},this.props.children),geom.placement!==Placement.FLOATING&&React.createElement(Arrow,{ref:this.arrowRef,placement:geom.placement,color:backgroundColor,arrowSize:arrowSize,positionStyle:arrowPositionStyle,elevation:elevation})))));};return BasePopover;}(Component);export default BasePopover;","map":{"version":3,"sources":["../src/BasePopover.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { Component } from 'react';\nimport { Animated, Easing, I18nManager, StyleSheet, TouchableWithoutFeedback, View } from 'react-native';\nimport Arrow from './Arrow';\nimport { DEBUG, DEFAULT_ARROW_SIZE, FIX_SHIFT, isWeb, styles } from './Constants';\nimport { computeGeometry, Geometry } from './Geometry';\nimport { Placement, Point, Rect, Size } from './Types';\nimport { getChangedProps, getRectForRef } from './Utility';\nvar BasePopover = /** @class */ (function (_super) {\n    __extends(BasePopover, _super);\n    function BasePopover() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            requestedContentSize: null,\n            activeGeom: undefined,\n            nextGeom: undefined,\n            showing: false,\n            animatedValues: {\n                scale: new Animated.Value(0),\n                translate: new Animated.ValueXY(),\n                fade: new Animated.Value(0),\n                translateArrow: new Animated.ValueXY()\n            }\n        };\n        _this._isMounted = false;\n        _this.animating = false;\n        _this.animateOutAfterShow = false;\n        _this.popoverRef = React.createRef();\n        _this.arrowRef = React.createRef();\n        return _this;\n    }\n    BasePopover.prototype.debug = function (line, obj) {\n        if (DEBUG || this.props.debug)\n            console.log(\"[\" + (new Date()).toISOString() + \"] \" + line + (obj ? \": \" + JSON.stringify(obj) : ''));\n    };\n    BasePopover.prototype.componentDidMount = function () {\n        this._isMounted = true;\n    };\n    BasePopover.prototype.componentDidUpdate = function (prevProps) {\n        // Make sure a value we care about has actually changed\n        var importantProps = ['isVisible', 'fromRect', 'displayArea', 'verticalOffset', 'offset', 'placement'];\n        var changedProps = getChangedProps(this.props, prevProps, importantProps);\n        if (!changedProps.length)\n            return;\n        this.debug('[BasePopover] componentDidUpdate - changedProps', changedProps);\n        if (this.props.isVisible !== prevProps.isVisible) {\n            this.debug(\"componentDidUpdate - isVisible changed, now \" + this.props.isVisible);\n            if (!this.props.isVisible) {\n                if (this.state.showing)\n                    this.animateOut();\n                else\n                    this.animateOutAfterShow = true;\n                this.debug('componentDidUpdate - Hiding popover');\n            }\n        }\n        else if (this.props.isVisible && prevProps.isVisible) {\n            this.debug('componentDidUpdate - isVisible not changed, handling other changes');\n            this.handleChange();\n        }\n    };\n    BasePopover.prototype.componentWillUnmount = function () {\n        this._isMounted = false;\n        if (this.state.showing) {\n            this.debug('componentWillUnmount');\n            this.animateOut();\n        }\n    };\n    BasePopover.prototype.measureContent = function (requestedContentSize) {\n        var _this = this;\n        if (!requestedContentSize.width) {\n            console.warn(\"Popover Warning - Can't Show - The Popover content has a width of 0, so there is nothing to present.\");\n            return;\n        }\n        if (!requestedContentSize.height) {\n            console.warn(\"Popover Warning - Can't Show - The Popover content has a height of 0, so there is nothing to present.\");\n            return;\n        }\n        if (this.props.skipMeasureContent()) {\n            this.debug(\"measureContent - Skipping, waiting for resize to finish\");\n            return;\n        }\n        if (!this.state.requestedContentSize ||\n            !requestedContentSize.equals(this.state.requestedContentSize)) {\n            this.debug(\"measureContent - new requestedContentSize: \" + JSON.stringify(requestedContentSize) + \" (used to be \" + JSON.stringify(this.state.requestedContentSize) + \")\");\n            this.setState({ requestedContentSize: requestedContentSize }, function () { return _this.handleChange(); });\n        }\n        else {\n            this.debug(\"measureContent - Skipping, content size did not change\");\n        }\n    };\n    /*\n     * Many factors may cause the geometry to change.\n     * This function collects all of them, waiting for 200ms after the last change,\n     * then takes action, either bringing up the popover or moving it to its new location\n     */\n    BasePopover.prototype.handleChange = function () {\n        var _this = this;\n        if (this.handleChangeTimeout)\n            clearTimeout(this.handleChangeTimeout);\n        /*\n         * This function will be called again once we have a requested content size,\n         * so safe to ignore for now\n         */\n        if (!this.state.requestedContentSize) {\n            this.debug('handleChange - no requestedContentSize, exiting...');\n            return;\n        }\n        this.debug('handleChange - waiting 100ms to accumulate all changes');\n        this.handleChangeTimeout = setTimeout(function () {\n            var _a = _this.state, activeGeom = _a.activeGeom, animatedValues = _a.animatedValues, requestedContentSize = _a.requestedContentSize;\n            var _b = _this.props, arrowSize = _b.arrowSize, popoverStyle = _b.popoverStyle, fromRect = _b.fromRect, displayArea = _b.displayArea, placement = _b.placement, onOpenStart = _b.onOpenStart, arrowShift = _b.arrowShift, onPositionChange = _b.onPositionChange, offset = _b.offset, popoverShift = _b.popoverShift;\n            if (requestedContentSize) {\n                _this.debug('handleChange - requestedContentSize', requestedContentSize);\n                _this.debug('handleChange - displayArea', displayArea);\n                _this.debug('handleChange - fromRect', fromRect);\n                if (placement)\n                    _this.debug('handleChange - placement', placement.toString());\n                var geom_1 = computeGeometry({\n                    requestedContentSize: requestedContentSize,\n                    placement: placement,\n                    fromRect: fromRect,\n                    displayArea: displayArea,\n                    arrowSize: arrowSize || DEFAULT_ARROW_SIZE,\n                    popoverStyle: popoverStyle,\n                    arrowShift: arrowShift,\n                    debug: _this.debug.bind(_this),\n                    previousPlacement: _this.getGeom().placement,\n                    offset: offset,\n                    popoverShift: popoverShift\n                });\n                _this.setState({ nextGeom: geom_1, requestedContentSize: requestedContentSize }, function () {\n                    if (geom_1.viewLargerThanDisplayArea.width || geom_1.viewLargerThanDisplayArea.height) {\n                        /*\n                         * If the view initially overflowed the display area,\n                         * wait one more render cycle to test-render it within\n                         * the display area to get final calculations for popoverOrigin before show\n                         */\n                        _this.debug('handleChange - delaying showing popover because viewLargerThanDisplayArea');\n                    }\n                    else if (!activeGeom) {\n                        _this.debug('handleChange - animating in');\n                        if (onOpenStart)\n                            setTimeout(onOpenStart);\n                        _this.animateIn();\n                    }\n                    else if (activeGeom && !Geometry.equals(activeGeom, geom_1)) {\n                        var moveTo = new Point(geom_1.popoverOrigin.x, geom_1.popoverOrigin.y);\n                        _this.debug('handleChange - Triggering popover move to', moveTo);\n                        _this.animateTo({\n                            values: animatedValues,\n                            fade: 1,\n                            scale: 1,\n                            translatePoint: moveTo,\n                            easing: Easing.inOut(Easing.quad),\n                            geom: geom_1,\n                            callback: onPositionChange\n                        });\n                    }\n                    else {\n                        _this.debug('handleChange - no change');\n                    }\n                });\n            }\n        }, 100);\n    };\n    BasePopover.getPolarity = function () {\n        return I18nManager.isRTL ? -1 : 1;\n    };\n    BasePopover.prototype.getGeom = function () {\n        var _a = this.state, activeGeom = _a.activeGeom, nextGeom = _a.nextGeom;\n        if (activeGeom)\n            return activeGeom;\n        if (nextGeom)\n            return nextGeom;\n        return new Geometry({\n            popoverOrigin: new Point(0, 0),\n            anchorPoint: new Point(0, 0),\n            placement: Placement.AUTO,\n            forcedContentSize: new Size(0, 0),\n            viewLargerThanDisplayArea: {\n                width: false,\n                height: false\n            }\n        });\n    };\n    BasePopover.prototype.getTranslateOrigin = function () {\n        var requestedContentSize = this.state.requestedContentSize;\n        var arrowSize = this.props.arrowSize || DEFAULT_ARROW_SIZE;\n        var _a = this.getGeom(), forcedContentSize = _a.forcedContentSize, viewLargerThanDisplayArea = _a.viewLargerThanDisplayArea, anchorPoint = _a.anchorPoint, placement = _a.placement;\n        var viewWidth = 0;\n        if (viewLargerThanDisplayArea.width && (forcedContentSize === null || forcedContentSize === void 0 ? void 0 : forcedContentSize.width))\n            viewWidth = forcedContentSize.width;\n        else if (requestedContentSize === null || requestedContentSize === void 0 ? void 0 : requestedContentSize.width)\n            viewWidth = requestedContentSize.width;\n        if ([Placement.LEFT, Placement.RIGHT].includes(placement))\n            viewWidth += arrowSize.height;\n        var viewHeight = 0;\n        if (viewLargerThanDisplayArea.height && (forcedContentSize === null || forcedContentSize === void 0 ? void 0 : forcedContentSize.height))\n            viewHeight = forcedContentSize.height;\n        else if (requestedContentSize === null || requestedContentSize === void 0 ? void 0 : requestedContentSize.height)\n            viewHeight = requestedContentSize.height;\n        if ([Placement.TOP, Placement.BOTTOM].includes(placement))\n            viewHeight += arrowSize.height;\n        this.debug('getTranslateOrigin - popoverSize', { width: viewWidth, height: viewHeight });\n        this.debug('getTranslateOrigin - anchorPoint', anchorPoint);\n        return new Point(anchorPoint.x - (viewWidth / 2), anchorPoint.y - (viewHeight / 2));\n    };\n    BasePopover.prototype.animateOut = function () {\n        var _this = this;\n        if (this.props.onCloseStart)\n            setTimeout(this.props.onCloseStart);\n        if (this._isMounted)\n            this.setState({ showing: false });\n        this.debug('animateOut - isMounted', this._isMounted);\n        this.animateTo({\n            values: this.state.animatedValues,\n            fade: 0,\n            scale: 0,\n            translatePoint: this.getTranslateOrigin(),\n            callback: function () { return setTimeout(_this.props.onCloseComplete); },\n            easing: Easing.inOut(Easing.quad),\n            geom: this.getGeom()\n        });\n    };\n    BasePopover.prototype.animateIn = function () {\n        var _this = this;\n        var nextGeom = this.state.nextGeom;\n        if (nextGeom !== undefined && nextGeom instanceof Geometry) {\n            var values = this.state.animatedValues;\n            // Should grow from anchor point\n            var translateStart = this.getTranslateOrigin();\n            // eslint-disable-next-line\n            translateStart.y += FIX_SHIFT; // Temp fix for useNativeDriver issue\n            values.translate.setValue(translateStart);\n            var translatePoint = new Point(nextGeom.popoverOrigin.x, nextGeom.popoverOrigin.y);\n            this.debug('animateIn - translateStart', translateStart);\n            this.debug('animateIn - translatePoint', translatePoint);\n            this.animateTo({\n                values: values,\n                fade: 1,\n                scale: 1,\n                translatePoint: translatePoint,\n                easing: Easing.out(Easing.back(1)),\n                geom: nextGeom,\n                callback: function () {\n                    if (_this._isMounted) {\n                        _this.setState({ showing: true });\n                        if (_this.props.debug || DEBUG) {\n                            setTimeout(function () {\n                                return _this.popoverRef.current &&\n                                    getRectForRef(_this.popoverRef).then(function (rect) { return _this.debug('animateIn - onOpenComplete - Calculated Popover Rect', rect); });\n                            });\n                            setTimeout(function () {\n                                return _this.arrowRef.current &&\n                                    getRectForRef(_this.arrowRef).then(function (rect) { return _this.debug('animateIn - onOpenComplete - Calculated Arrow Rect', rect); });\n                            });\n                        }\n                    }\n                    if (_this.props.onOpenComplete)\n                        setTimeout(_this.props.onOpenComplete);\n                    if (_this.animateOutAfterShow || !_this._isMounted) {\n                        _this.animateOut();\n                        _this.animateOutAfterShow = false;\n                    }\n                }\n            });\n        }\n    };\n    BasePopover.prototype.animateTo = function (args) {\n        var _this = this;\n        var fade = args.fade, translatePoint = args.translatePoint, scale = args.scale, callback = args.callback, easing = args.easing, values = args.values;\n        var commonConfig = __assign({ duration: 300, easing: easing, useNativeDriver: !isWeb }, this.props.animationConfig);\n        if (this.animating) {\n            setTimeout(function () { return _this.animateTo(args); }, 100);\n            return;\n        }\n        // eslint-disable-next-line\n        translatePoint.y = translatePoint.y + FIX_SHIFT; // Temp fix for useNativeDriver issue\n        if (!fade && fade !== 0) {\n            console.log('Popover: Fade value is null');\n            return;\n        }\n        if (!translatePoint) {\n            console.log('Popover: Translate Point value is null');\n            return;\n        }\n        if (!scale && scale !== 0) {\n            console.log('Popover: Scale value is null');\n            return;\n        }\n        this.animating = true;\n        Animated.parallel([\n            Animated.timing(values.fade, __assign(__assign({}, commonConfig), { toValue: fade })),\n            Animated.timing(values.translate, __assign(__assign({}, commonConfig), { toValue: translatePoint })),\n            Animated.timing(values.scale, __assign(__assign({}, commonConfig), { toValue: scale }))\n        ]).start(function () {\n            _this.animating = false;\n            if (_this._isMounted)\n                _this.setState({ activeGeom: _this.state.nextGeom });\n            if (callback)\n                callback();\n        });\n    };\n    BasePopover.prototype.render = function () {\n        var _this = this;\n        var _a = this.state, animatedValues = _a.animatedValues, nextGeom = _a.nextGeom, requestedContentSize = _a.requestedContentSize;\n        var flattenedPopoverStyle = StyleSheet.flatten(this.props.popoverStyle);\n        var arrowSize = this.props.arrowSize || DEFAULT_ARROW_SIZE;\n        var geom = this.getGeom();\n        var transformStyle = __assign(__assign({ position: 'absolute' }, requestedContentSize), { transform: [\n                { translateX: animatedValues.translate.x },\n                { translateY: animatedValues.translate.y },\n                { scale: animatedValues.scale }\n            ] });\n        var shadowOffset = flattenedPopoverStyle.shadowOffset, shadowColor = flattenedPopoverStyle.shadowColor, shadowOpacity = flattenedPopoverStyle.shadowOpacity, shadowRadius = flattenedPopoverStyle.shadowRadius, elevation = flattenedPopoverStyle.elevation, otherPopoverStyles = __rest(flattenedPopoverStyle, [\"shadowOffset\", \"shadowColor\", \"shadowOpacity\", \"shadowRadius\", \"elevation\"]);\n        var shadowStyle = {\n            shadowOffset: shadowOffset,\n            shadowColor: shadowColor,\n            shadowOpacity: shadowOpacity,\n            shadowRadius: shadowRadius\n        };\n        var contentWrapperStyle = __assign(__assign(__assign({}, styles.popoverContent), otherPopoverStyles), { elevation: elevation });\n        /*\n         * We want to always use next here, because the we need this to re-render\n         * before we can animate to the correct spot for the active.\n         */\n        if (nextGeom) {\n            contentWrapperStyle.maxWidth = nextGeom.forcedContentSize.width;\n            contentWrapperStyle.maxHeight = nextGeom.forcedContentSize.height;\n        }\n        var arrowPositionStyle = {};\n        if (geom.placement === Placement.RIGHT || geom.placement === Placement.LEFT) {\n            arrowPositionStyle.top = geom.anchorPoint.y - geom.popoverOrigin.y - arrowSize.height;\n            if (transformStyle.width)\n                transformStyle.width += arrowSize.height;\n            if (geom.placement === Placement.RIGHT)\n                contentWrapperStyle.left = arrowSize.height;\n        }\n        else if (geom.placement === Placement.TOP || geom.placement === Placement.BOTTOM) {\n            arrowPositionStyle.left = geom.anchorPoint.x - geom.popoverOrigin.x - (arrowSize.width / 2);\n            if (transformStyle.height)\n                transformStyle.height += arrowSize.height;\n            if (geom.placement === Placement.BOTTOM)\n                contentWrapperStyle.top = arrowSize.height;\n        }\n        switch (geom.placement) {\n            case Placement.TOP:\n                arrowPositionStyle.bottom = 0;\n                break;\n            case Placement.BOTTOM:\n                arrowPositionStyle.top = 0;\n                break;\n            case Placement.LEFT:\n                arrowPositionStyle.right = 0;\n                break;\n            case Placement.RIGHT:\n                arrowPositionStyle.left = 0;\n                break;\n            default:\n        }\n        // Temp fix for useNativeDriver issue\n        var backgroundShift = animatedValues.fade.interpolate({\n            inputRange: [0, 0.0001, 1],\n            outputRange: [0, FIX_SHIFT, FIX_SHIFT]\n        });\n        var backgroundStyle = __assign(__assign(__assign({}, styles.background), { transform: [{ translateY: backgroundShift }] }), StyleSheet.flatten(this.props.backgroundStyle));\n        var containerStyle = __assign(__assign({}, styles.container), { opacity: animatedValues.fade });\n        var backgroundColor = flattenedPopoverStyle.backgroundColor ||\n            styles.popoverContent.backgroundColor;\n        return (React.createElement(View, { pointerEvents: \"box-none\", style: [styles.container, { top: -1 * FIX_SHIFT }] },\n            React.createElement(View, { pointerEvents: \"box-none\", style: [styles.container, { top: FIX_SHIFT, flex: 1 }], onLayout: function (evt) { return _this.props.onDisplayAreaChanged(new Rect(evt.nativeEvent.layout.x, evt.nativeEvent.layout.y - FIX_SHIFT, evt.nativeEvent.layout.width, evt.nativeEvent.layout.height)); } }),\n            React.createElement(Animated.View, { pointerEvents: \"box-none\", style: containerStyle },\n                this.props.showBackground !== false && (React.createElement(TouchableWithoutFeedback, { onPress: this.props.onRequestClose },\n                    React.createElement(Animated.View, { style: backgroundStyle }))),\n                React.createElement(View, { pointerEvents: \"box-none\", style: __assign({ top: 0, left: 0 }, shadowStyle) },\n                    React.createElement(Animated.View, { style: transformStyle },\n                        React.createElement(View, { ref: this.popoverRef, style: contentWrapperStyle, onLayout: function (evt) {\n                                var layout = __assign({}, evt.nativeEvent.layout);\n                                setTimeout(function () { return _this._isMounted &&\n                                    _this.measureContent(new Size(layout.width, layout.height)); }, 10);\n                            } }, this.props.children),\n                        geom.placement !== Placement.FLOATING &&\n                            React.createElement(Arrow, { ref: this.arrowRef, placement: geom.placement, color: backgroundColor, arrowSize: arrowSize, positionStyle: arrowPositionStyle, elevation: elevation }))))));\n    };\n    return BasePopover;\n}(Component));\nexport default BasePopover;\n//# sourceMappingURL=BasePopover.js.map"]},"metadata":{},"sourceType":"module"}